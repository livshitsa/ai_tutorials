<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Data Extraction: Practical Implementation Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-tabs {
            background: #f8f9fa;
            padding: 0;
            display: flex;
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tab {
            flex: 1;
            padding: 20px;
            background: #e9ecef;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
            border-right: 1px solid #dee2e6;
        }

        .nav-tab:last-child {
            border-right: none;
        }

        .nav-tab.active {
            background: white;
            color: #495057;
            border-bottom: 3px solid #4facfe;
        }

        .nav-tab:hover:not(.active) {
            background: #f8f9fa;
            color: #495057;
        }

        .tab-content {
            display: none;
            padding: 30px;
            min-height: 600px;
        }

        .tab-content.active {
            display: block;
        }

        .step-section {
            margin-bottom: 40px;
        }

        .step-section h2 {
            color: #495057;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-overview {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .step-overview h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .process-flow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .process-step {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .process-step::after {
            content: '‚Üí';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: #4facfe;
        }

        .process-step:last-child::after {
            display: none;
        }

        .process-step h4 {
            color: #4facfe;
            margin-bottom: 10px;
        }

        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
            line-height: 1.4;
            margin: 20px 0;
        }

        .json-key {
            color: #81c784;
        }

        .json-string {
            color: #ffb74d;
        }

        .json-number {
            color: #64b5f6;
        }

        .json-comment {
            color: #90a4ae;
            font-style: italic;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .column {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #dee2e6;
        }

        .column h4 {
            color: #495057;
            margin-bottom: 15px;
        }

        .highlight-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .practical-example {
            background: #f0f8ff;
            border: 2px solid #4dabf7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .practical-example h4 {
            color: #1971c2;
            margin-bottom: 15px;
        }

        .prompt-chain {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }

        .prompt-step {
            background: white;
            border-left: 4px solid #4facfe;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .prompt-step h5 {
            color: #4facfe;
            margin-bottom: 10px;
        }

        .prompt-content {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .interactive-demo {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .interactive-demo h4 {
            color: #155724;
            margin-bottom: 15px;
        }

        .demo-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .demo-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-btn:hover {
            background: #20c997;
            transform: translateY(-2px);
        }

        .demo-btn.active {
            background: #dc3545;
        }

        .demo-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin-top: 15px;
            min-height: 100px;
            white-space: pre-wrap;
        }

        .best-practices {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .practice-card {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
        }

        .practice-card h4 {
            color: #4facfe;
            margin-bottom: 15px;
        }

        .practice-card ul {
            list-style: none;
            padding: 0;
        }

        .practice-card li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .practice-card li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .process-flow {
                grid-template-columns: 1fr;
            }
            
            .process-step::after {
                content: '‚Üì';
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }
            
            .demo-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÑ LLM Data Extraction Guide</h1>
            <p>Learn the practical 3-step approach: Schema ‚Üí Chain ‚Üí Process</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">üéØ The 3-Step Approach</button>
            <button class="nav-tab" onclick="showTab('schema')">üìã Step 1: Schema Design</button>
            <button class="nav-tab" onclick="showTab('prompts')">üîó Step 2: Prompt Chain</button>
            <button class="nav-tab" onclick="showTab('processing')">‚öôÔ∏è Step 3: Data Processing</button>
            <button class="nav-tab" onclick="showTab('practice')">üöÄ Complete Example</button>
        </div>

        <!-- Overview Tab -->
        <div class="tab-content active" id="overview">
            <div class="step-section">
                <h2>üéØ The Universal LLM Data Extraction Approach</h2>
                <p>There's one proven approach that works for 90% of document extraction tasks. It's practical, implementable, and gives consistent results.</p>

                <div class="step-overview">
                    <h3>Why This Approach Works</h3>
                    <p>Instead of trying to extract everything at once, we break the process into three manageable steps that build on each other. This gives you better accuracy, easier debugging, and more reliable results.</p>
                </div>

                <div class="process-flow">
                    <div class="process-step">
                        <h4>Step 1: Schema Design</h4>
                        <p>Define exactly what you want to extract and how it should be structured</p>
                    </div>
                    <div class="process-step">
                        <h4>Step 2: Prompt Chain</h4>
                        <p>Create a sequence of focused prompts that extract data step by step</p>
                    </div>
                    <div class="process-step">
                        <h4>Step 3: Data Processing</h4>
                        <p>Clean, validate, and enhance the extracted data</p>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>üß† How This Differs from "Just Ask the LLM"</h2>
                
                <div class="two-column">
                    <div class="column">
                        <h4>‚ùå Naive Approach</h4>
                        <div class="code-example">PROMPT: "Extract all the data from this invoice"

PROBLEMS:
‚Ä¢ Vague instructions
‚Ä¢ No structure guidance  
‚Ä¢ Inconsistent output
‚Ä¢ Hard to validate
‚Ä¢ 60-70% accuracy</div>
                    </div>
                    <div class="column">
                        <h4>‚úÖ Structured Approach</h4>
                        <div class="code-example">STEP 1: Define schema
STEP 2: Chain 3-4 focused prompts
STEP 3: Validate & clean

BENEFITS:
‚Ä¢ Clear expectations
‚Ä¢ Consistent structure
‚Ä¢ Easy to debug
‚Ä¢ Reliable validation
‚Ä¢ 85-95% accuracy</div>
                    </div>
                </div>

                <div class="highlight-box">
                    <h4>üí° Key Insight for Interns</h4>
                    <p>The magic isn't in the LLM itself - it's in how you structure the problem. A well-designed extraction pipeline with clear schemas and focused prompts will consistently outperform a single "smart" prompt.</p>
                </div>
            </div>

            <div class="step-section">
                <h2>üìä What You'll Learn</h2>
                
                <div class="best-practices">
                    <div class="practice-card">
                        <h4>üéØ Schema Design</h4>
                        <ul>
                            <li>How to break down complex data into schemas</li>
                            <li>JSON Schema best practices</li>
                            <li>Field types and validation rules</li>
                            <li>When to use nested vs flat structures</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üîó Prompt Chaining</h4>
                        <ul>
                            <li>Why multiple focused prompts beat one big prompt</li>
                            <li>How to pass context between prompts</li>
                            <li>Error handling in prompt chains</li>
                            <li>Performance optimization techniques</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>‚öôÔ∏è Data Processing</h4>
                        <ul>
                            <li>Validation strategies that actually work</li>
                            <li>Data cleaning and normalization</li>
                            <li>Confidence scoring methods</li>
                            <li>Error recovery mechanisms</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schema Tab -->
        <div class="tab-content" id="schema">
            <div class="step-section">
                <h2>üìã Step 1: Schema Design - Your Blueprint for Success</h2>
                <p>The schema is your contract with the LLM. It tells the model exactly what you want, in what format, and with what constraints. Good schemas are the difference between chaotic extraction and reliable results.</p>

                <div class="step-overview">
                    <h3>Schema Design Principles</h3>
                    <p>A well-designed schema is like a good job description - it's specific enough to get exactly what you want, but flexible enough to handle real-world variations.</p>
                </div>
            </div>

            <div class="step-section">
                <h2>üéØ Anatomy of a Good Extraction Schema</h2>

                <div class="practical-example">
                    <h4>üìÑ Example: Invoice Data Extraction</h4>
                    <div class="code-example">{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-comment">// Basic identification fields</span>
    <span class="json-key">"invoice_number"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Invoice ID, often starts with 'INV' or '#'"</span>,
      <span class="json-key">"pattern"</span>: <span class="json-string">"^[A-Z0-9-]+$"</span>
    },
    <span class="json-key">"invoice_date"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Date in YYYY-MM-DD format"</span>,
      <span class="json-key">"format"</span>: <span class="json-string">"date"</span>
    },
    
    <span class="json-comment">// Financial fields with validation</span>
    <span class="json-key">"total_amount"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"number"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Final total including tax"</span>,
      <span class="json-key">"minimum"</span>: <span class="json-number">0</span>
    },
    <span class="json-key">"currency"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"enum"</span>: [<span class="json-string">"USD"</span>, <span class="json-string">"EUR"</span>, <span class="json-string">"GBP"</span>],
      <span class="json-key">"default"</span>: <span class="json-string">"USD"</span>
    },
    
    <span class="json-comment">// Complex nested structure</span>
    <span class="json-key">"line_items"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"array"</span>,
      <span class="json-key">"items"</span>: {
        <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
        <span class="json-key">"properties"</span>: {
          <span class="json-key">"description"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
          <span class="json-key">"quantity"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span>, <span class="json-key">"minimum"</span>: <span class="json-number">0</span> },
          <span class="json-key">"unit_price"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> },
          <span class="json-key">"total_price"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> }
        },
        <span class="json-key">"required"</span>: [<span class="json-string">"description"</span>, <span class="json-string">"total_price"</span>]
      }
    }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"invoice_number"</span>, <span class="json-string">"total_amount"</span>]
}</div>
                </div>
            </div>

            <div class="step-section">
                <h2>üèóÔ∏è Schema Design Best Practices</h2>

                <div class="best-practices">
                    <div class="practice-card">
                        <h4>üìù Descriptive Field Names</h4>
                        <ul>
                            <li>Use clear, unambiguous names</li>
                            <li>"invoice_date" not "date"</li>
                            <li>"total_amount" not "total"</li>
                            <li>Be consistent with naming conventions</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üìñ Rich Descriptions</h4>
                        <ul>
                            <li>Explain what each field represents</li>
                            <li>Include format expectations</li>
                            <li>Mention common variations</li>
                            <li>Add examples when helpful</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üîí Validation Rules</h4>
                        <ul>
                            <li>Set data type constraints</li>
                            <li>Use enums for limited options</li>
                            <li>Add minimum/maximum values</li>
                            <li>Include pattern validation</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üéØ Required vs Optional</h4>
                        <ul>
                            <li>Mark essential fields as required</li>
                            <li>Make optional fields explicit</li>
                            <li>Provide default values when logical</li>
                            <li>Consider business requirements</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>‚öñÔ∏è Schema Complexity: Finding the Right Balance</h2>

                <div class="two-column">
                    <div class="column">
                        <h4>üö´ Too Simple Schema</h4>
                        <div class="code-example">{
  "vendor": "string",
  "amount": "number",
  "date": "string"
}</div>
                        <p><strong>Problems:</strong> Vague, no validation, inconsistent output</p>
                    </div>
                    <div class="column">
                        <h4>üö´ Too Complex Schema</h4>
                        <div class="code-example">{
  "vendor_legal_entity_name": "string",
  "vendor_tax_id_formatted": "string", 
  "amount_pre_tax_in_base_currency": "number",
  "tax_calculation_breakdown": {...}
}</div>
                        <p><strong>Problems:</strong> Over-engineered, confuses LLM, harder to extract</p>
                    </div>
                </div>

                <div class="highlight-box">
                    <h4>‚úÖ Just Right Schema Design</h4>
                    <p>Start with the core fields you absolutely need. Add complexity gradually based on real extraction needs. A schema that captures 90% of your use cases with 10% of the complexity is perfect.</p>
                </div>
            </div>

            <div class="step-section">
                <h2>üõ†Ô∏è Schema Design Exercise</h2>

                <div class="interactive-demo">
                    <h4>üìß Design a Schema for Email Extraction</h4>
                    <p>You need to extract data from customer support emails. What fields would you include?</p>
                    
                    <div class="demo-buttons">
                        <button class="demo-btn" onclick="showSchemaExample('basic')">Show Basic Schema</button>
                        <button class="demo-btn" onclick="showSchemaExample('complete')">Show Complete Schema</button>
                        <button class="demo-btn" onclick="showSchemaExample('explanation')">Show Design Rationale</button>
                    </div>

                    <div class="demo-output" id="schema-output">Click a button above to see different schema approaches...</div>
                </div>
            </div>
        </div>

        <!-- Prompts Tab -->
        <div class="tab-content" id="prompts">
            <div class="step-section">
                <h2>üîó Step 2: Prompt Chain - Breaking Down the Problem</h2>
                <p>Instead of asking the LLM to extract everything at once, we break it into a sequence of focused tasks. Each prompt in the chain has a specific job, making the overall extraction more reliable and debuggable.</p>

                <div class="step-overview">
                    <h3>Why Prompt Chaining Works Better</h3>
                    <p>Think of it like giving directions: "Take me to the store" vs "Turn left at the light, go straight for 2 blocks, then turn right." Specific instructions get better results.</p>
                </div>
            </div>

            <div class="step-section">
                <h2>üéØ The Standard 4-Prompt Chain</h2>

                <div class="prompt-chain">
                    <div class="prompt-step">
                        <h5>Prompt 1: Document Analysis</h5>
                        <p>Understand the document type and structure</p>
                        <div class="prompt-content">SYSTEM: You are a document analysis specialist.

TASK: Analyze this document and identify:
1. Document type (invoice, resume, email, etc.)
2. Overall structure and sections
3. Data quality and completeness
4. Any obvious formatting issues

DOCUMENT: {document_text}

OUTPUT: Analysis summary in JSON format</div>
                    </div>

                    <div class="prompt-step">
                        <h5>Prompt 2: Basic Field Extraction</h5>
                        <p>Extract clearly labeled, simple fields first</p>
                        <div class="prompt-content">SYSTEM: You are a data extraction specialist.

TASK: Extract basic fields from this document using the provided schema.
- Focus only on clearly labeled fields
- Use exact text when possible
- Return null for missing fields
- Convert data types as specified in schema

SCHEMA: {basic_fields_schema}
DOCUMENT: {document_text}

OUTPUT: JSON matching the schema exactly</div>
                    </div>

                    <div class="prompt-step">
                        <h5>Prompt 3: Complex Structure Extraction</h5>
                        <p>Handle tables, lists, and nested data</p>
                        <div class="prompt-content">SYSTEM: You are a structured data extraction specialist.

TASK: Extract complex structured data (tables, lists, nested objects).

CONTEXT: {results_from_previous_prompts}
SCHEMA: {complex_structure_schema}
DOCUMENT: {document_text}

INSTRUCTIONS:
- Parse tables row by row
- Maintain hierarchical relationships
- Calculate totals if needed
- Validate internal consistency

OUTPUT: JSON for complex structures only</div>
                    </div>

                    <div class="prompt-step">
                        <h5>Prompt 4: Integration & Validation</h5>
                        <p>Combine results and validate consistency</p>
                        <div class="prompt-content">SYSTEM: You are a data integration specialist.

TASK: Combine extracted data and validate consistency.

EXTRACTED DATA: {combined_results}
ORIGINAL DOCUMENT: {document_text}

VALIDATION RULES:
- Check mathematical calculations
- Verify cross-references
- Ensure data type consistency
- Flag any inconsistencies

OUTPUT: Final validated JSON + confidence score</div>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>üîÑ How Data Flows Through the Chain</h2>

                <div class="practical-example">
                    <h4>üìÑ Invoice Processing Example</h4>
                    <div class="two-column">
                        <div class="column">
                            <h4>Input Document</h4>
                            <div class="code-example">INVOICE #INV-2024-001

TechCorp Solutions
Phone: (555) 123-4567

Bill To: StartupXYZ
Date: March 15, 2024
Due: April 14, 2024

Items:
‚Ä¢ Web Development: $2,500
‚Ä¢ Hosting Setup: $300  
‚Ä¢ SSL Certificate: $99

Subtotal: $2,899
Tax (8%): $231.92
Total: $3,130.92</div>
                        </div>
                        <div class="column">
                            <h4>Chain Processing Flow</h4>
                            <div class="code-example"><span class="json-comment">// Prompt 1 Output</span>
{
  "document_type": "invoice",
  "structure": "standard_format",
  "quality": "good"
}

<span class="json-comment">// Prompt 2 Output</span>
{
  "invoice_number": "INV-2024-001",
  "vendor": "TechCorp Solutions",
  "date": "2024-03-15",
  "total": 3130.92
}

<span class="json-comment">// Prompt 3 Output</span>
{
  "line_items": [
    {"desc": "Web Development", "amount": 2500},
    {"desc": "Hosting Setup", "amount": 300},
    {"desc": "SSL Certificate", "amount": 99}
  ]
}

<span class="json-comment">// Prompt 4 Output</span>
{
  "validated_data": {...},
  "confidence": 0.95,
  "issues": []
}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>üéØ Prompt Engineering Best Practices</h2>

                <div class="best-practices">
                    <div class="practice-card">
                        <h4>üé™ Role-Based Prompts</h4>
                        <ul>
                            <li>Give the LLM a specific role/persona</li>
                            <li>"You are a financial analyst..."</li>
                            <li>"You are a document specialist..."</li>
                            <li>Roles guide behavior and output style</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üìã Clear Task Definition</h4>
                        <ul>
                            <li>Start with "TASK:" followed by specific goal</li>
                            <li>List exactly what to extract</li>
                            <li>Specify what NOT to include</li>
                            <li>Define success criteria</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üîß Temperature Control</h4>
                        <ul>
                            <li>Use low temperature (0.1) for consistent extraction</li>
                            <li>Higher temperature (0.3) for creative interpretation</li>
                            <li>Zero temperature for exact pattern matching</li>
                            <li>Adjust based on task complexity</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üõ°Ô∏è Error Handling</h4>
                        <ul>
                            <li>Tell LLM what to do with missing data</li>
                            <li>Handle ambiguous or unclear text</li>
                            <li>Provide fallback instructions</li>
                            <li>Include confidence indicators</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>üõ†Ô∏è Interactive Prompt Chain Demo</h2>

                <div class="interactive-demo">
                    <h4>üìß Watch Prompt Chain Process an Email</h4>
                    <p>See how each prompt in the chain processes the same customer support email differently.</p>
                    
                    <div class="demo-buttons">
                        <button class="demo-btn" onclick="showPromptDemo('analysis')">Step 1: Analysis</button>
                        <button class="demo-btn" onclick="showPromptDemo('basic')">Step 2: Basic Fields</button>
                        <button class="demo-btn" onclick="showPromptDemo('complex')">Step 3: Complex Data</button>
                        <button class="demo-btn" onclick="showPromptDemo('integration')">Step 4: Integration</button>
                    </div>

                    <div class="demo-output" id="prompt-output">Click a step above to see how each prompt processes the document...</div>
                </div>
            </div>
        </div>

        <!-- Processing Tab -->
        <div class="tab-content" id="processing">
            <div class="step-section">
                <h2>‚öôÔ∏è Step 3: Data Processing - Making It Production Ready</h2>
                <p>Raw LLM output is just the beginning. Real-world extraction systems need validation, cleaning, enhancement, and error handling to be reliable in production.</p>

                <div class="step-overview">
                    <h3>Why Post-Processing Matters</h3>
                    <p>LLMs are amazing but not perfect. They might extract "March 15th, 2024" when you need "2024-03-15", or return "Two thousand" instead of 2000. Post-processing turns inconsistent LLM output into clean, reliable data.</p>
                </div>
            </div>

            <div class="step-section">
                <h2>üîç The 4-Layer Processing Pipeline</h2>

                <div class="process-flow">
                    <div class="process-step">
                        <h4>1. Validation</h4>
                        <p>Check data types, required fields, and constraints</p>
                    </div>
                    <div class="process-step">
                        <h4>2. Cleaning</h4>
                        <p>Normalize formats, fix common issues</p>
                    </div>
                    <div class="process-step">
                        <h4>3. Enhancement</h4>
                        <p>Add calculated fields, enrich data</p>
                    </div>
                    <div class="process-step">
                        <h4>4. Quality Scoring</h4>
                        <p>Assign confidence scores and flag issues</p>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>‚úÖ Layer 1: Validation</h2>

                <div class="practical-example">
                    <h4>üîç Schema Validation + Business Rules</h4>
                    <div class="code-example">function validateExtractedData(data, schema) {
  const validationResults = {
    isValid: true,
    errors: [],
    warnings: []
  };

  <span class="json-comment">// JSON Schema validation</span>
  const schemaErrors = validateAgainstSchema(data, schema);
  if (schemaErrors.length > 0) {
    validationResults.errors.push(...schemaErrors);
    validationResults.isValid = false;
  }

  <span class="json-comment">// Business rule validation</span>
  if (data.invoice_date && data.due_date) {
    if (new Date(data.due_date) <= new Date(data.invoice_date)) {
      validationResults.errors.push("Due date must be after invoice date");
    }
  }

  <span class="json-comment">// Mathematical consistency</span>
  if (data.line_items && data.subtotal) {
    const calculatedSubtotal = data.line_items
      .reduce((sum, item) => sum + item.amount, 0);
    if (Math.abs(calculatedSubtotal - data.subtotal) > 0.01) {
      validationResults.warnings.push("Subtotal doesn't match line items");
    }
  }

  return validationResults;
}</div>
                </div>
            </div>

            <div class="step-section">
                <h2>üßπ Layer 2: Data Cleaning</h2>

                <div class="two-column">
                    <div class="column">
                        <h4>Common Cleaning Tasks</h4>
                        <div class="code-example"><span class="json-comment">// Date normalization</span>
"March 15, 2024" ‚Üí "2024-03-15"
"15/03/2024" ‚Üí "2024-03-15"

<span class="json-comment">// Number cleaning</span>
"$1,245.67" ‚Üí 1245.67
"Two thousand" ‚Üí 2000

<span class="json-comment">// Text normalization</span>
"  TechCorp Inc.  " ‚Üí "TechCorp Inc."
"ACME CORP" ‚Üí "Acme Corp"

<span class="json-comment">// Phone formatting</span>
"555-123-4567" ‚Üí "+1-555-123-4567"
"(555) 123 4567" ‚Üí "+1-555-123-4567"</div>
                    </div>
                    <div class="column">
                        <h4>Smart Cleaning Functions</h4>
                        <div class="code-example">function cleanCurrency(value) {
  if (typeof value === 'number') return value;
  
  <span class="json-comment">// Remove currency symbols and commas</span>
  const cleaned = value
    .replace(/[$‚Ç¨¬£¬•,]/g, '')
    .trim();
  
  const number = parseFloat(cleaned);
  return isNaN(number) ? null : number;
}

function cleanDate(dateString) {
  const formats = [
    'YYYY-MM-DD',
    'MM/DD/YYYY', 
    'DD/MM/YYYY',
    'Month DD, YYYY'
  ];
  
  for (const format of formats) {
    const parsed = moment(dateString, format);
    if (parsed.isValid()) {
      return parsed.format('YYYY-MM-DD');
    }
  }
  
  return null;
}</div>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>‚ö° Layer 3: Data Enhancement</h2>

                <div class="practical-example">
                    <h4>üî¢ Calculated Fields and Data Enrichment</h4>
                    <div class="code-example">function enhanceInvoiceData(data) {
  const enhanced = { ...data };

  <span class="json-comment">// Calculate missing totals</span>
  if (data.line_items && !data.subtotal) {
    enhanced.subtotal = data.line_items
      .reduce((sum, item) => sum + (item.quantity * item.unit_price), 0);
  }

  <span class="json-comment">// Add derived fields</span>
  if (data.invoice_date && data.due_date) {
    const invoiceDate = new Date(data.invoice_date);
    const dueDate = new Date(data.due_date);
    enhanced.payment_terms_days = Math.round(
      (dueDate - invoiceDate) / (1000 * 60 * 60 * 24)
    );
  }

  <span class="json-comment">// Add metadata</span>
  enhanced.extraction_metadata = {
    processed_at: new Date().toISOString(),
    line_item_count: data.line_items?.length || 0,
    has_tax: Boolean(data.tax_amount),
    currency_detected: detectCurrency(data.total_amount)
  };

  return enhanced;
}</div>
                </div>
            </div>

            <div class="step-section">
                <h2>üìä Layer 4: Quality Scoring</h2>

                <div class="two-column">
                    <div class="column">
                        <h4>Confidence Calculation</h4>
                        <div class="code-example">function calculateConfidence(data, original) {
  let score = 1.0;
  const factors = [];

  <span class="json-comment">// Required field completeness</span>
  const requiredFields = ['invoice_number', 'total'];
  const missingRequired = requiredFields
    .filter(field => !data[field]);
  score -= missingRequired.length * 0.3;

  <span class="json-comment">// Data quality indicators</span>
  if (data.line_items?.length > 0) {
    score += 0.1; <span class="json-comment">// Detailed breakdown</span>
  }
  
  if (data.tax_amount && data.subtotal) {
    const taxRate = data.tax_amount / data.subtotal;
    if (taxRate > 0.05 && taxRate < 0.15) {
      score += 0.1; <span class="json-comment">// Reasonable tax rate</span>
    }
  }

  return Math.max(0, Math.min(1, score));
}</div>
                    </div>
                    <div class="column">
                        <h4>Quality Flags</h4>
                        <div class="code-example">function generateQualityFlags(data) {
  const flags = [];

  <span class="json-comment">// Data completeness</span>
  if (Object.values(data).filter(v => v === null).length > 2) {
    flags.push({
      level: 'warning',
      message: 'Multiple missing fields'
    });
  }

  <span class="json-comment">// Business logic checks</span>
  if (data.total < 0) {
    flags.push({
      level: 'error',
      message: 'Negative total amount'
    });
  }

  <span class="json-comment">// Consistency checks</span>
  if (data.subtotal && data.total && data.total < data.subtotal) {
    flags.push({
      level: 'error',
      message: 'Total less than subtotal'
    });
  }

  return flags;
}</div>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>üõ†Ô∏è Complete Processing Pipeline</h2>

                <div class="interactive-demo">
                    <h4>üìä Watch Data Transform Through the Pipeline</h4>
                    <p>See how raw LLM output gets cleaned and enhanced into production-ready data.</p>
                    
                    <div class="demo-buttons">
                        <button class="demo-btn" onclick="showProcessingDemo('raw')">Raw LLM Output</button>
                        <button class="demo-btn" onclick="showProcessingDemo('validated')">After Validation</button>
                        <button class="demo-btn" onclick="showProcessingDemo('cleaned')">After Cleaning</button>
                        <button class="demo-btn" onclick="showProcessingDemo('enhanced')">After Enhancement</button>
                        <button class="demo-btn" onclick="showProcessingDemo('final')">Final Result</button>
                    </div>

                    <div class="demo-output" id="processing-output">Click a stage above to see the data transformation...</div>
                </div>
            </div>
        </div>

        <!-- Practice Tab -->
        <div class="tab-content" id="practice">
            <div class="step-section">
                <h2>üöÄ Complete Example: Invoice Extraction System</h2>
                <p>Let's put it all together! Here's a complete, implementable example that shows Schema ‚Üí Chain ‚Üí Processing in action.</p>

                <div class="step-overview">
                    <h3>What We're Building</h3>
                    <p>A reliable invoice data extraction system that can handle real-world documents with 90%+ accuracy. This is production-ready code you can adapt for your own projects.</p>
                </div>
            </div>

            <div class="step-section">
                <h2>üìã Step 1: Complete Schema</h2>

                <div class="code-example">{
  <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
  <span class="json-key">"properties"</span>: {
    <span class="json-comment">// Core identification</span>
    <span class="json-key">"invoice_number"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Unique invoice identifier"</span>
    },
    <span class="json-key">"invoice_date"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"format"</span>: <span class="json-string">"date"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Invoice issue date in YYYY-MM-DD format"</span>
    },
    <span class="json-key">"due_date"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"string"</span>,
      <span class="json-key">"format"</span>: <span class="json-string">"date"</span>,
      <span class="json-key">"description"</span>: <span class="json-string">"Payment due date"</span>
    },

    <span class="json-comment">// Company information</span>
    <span class="json-key">"vendor"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"properties"</span>: {
        <span class="json-key">"name"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
        <span class="json-key">"address"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
        <span class="json-key">"phone"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
        <span class="json-key">"email"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span>, <span class="json-key">"format"</span>: <span class="json-string">"email"</span> }
      }
    },
    <span class="json-key">"customer"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
      <span class="json-key">"properties"</span>: {
        <span class="json-key">"name"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
        <span class="json-key">"address"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> }
      }
    },

    <span class="json-comment">// Financial breakdown</span>
    <span class="json-key">"line_items"</span>: {
      <span class="json-key">"type"</span>: <span class="json-string">"array"</span>,
      <span class="json-key">"items"</span>: {
        <span class="json-key">"type"</span>: <span class="json-string">"object"</span>,
        <span class="json-key">"properties"</span>: {
          <span class="json-key">"description"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
          <span class="json-key">"quantity"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> },
          <span class="json-key">"unit_price"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> },
          <span class="json-key">"total_price"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> }
        }
      }
    },
    <span class="json-key">"subtotal"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> },
    <span class="json-key">"tax_amount"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> },
    <span class="json-key">"total_amount"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span> }
  },
  <span class="json-key">"required"</span>: [<span class="json-string">"invoice_number"</span>, <span class="json-string">"total_amount"</span>]
}</div>
            </div>

            <div class="step-section">
                <h2>üîó Step 2: Complete Prompt Chain</h2>

                <div class="prompt-chain">
                    <div class="prompt-step">
                        <h5>Prompt 1: Document Analysis & Basic Fields</h5>
                        <div class="prompt-content">SYSTEM: You are an expert invoice data extraction specialist.

TASK: Extract basic invoice information from the provided document.

INSTRUCTIONS:
- Extract clearly labeled fields only
- Use exact text when possible
- Convert dates to YYYY-MM-DD format
- Convert monetary amounts to numbers (remove $ and commas)
- Return null for missing fields

SCHEMA:
{
  "invoice_number": "string",
  "invoice_date": "string (YYYY-MM-DD)",
  "due_date": "string (YYYY-MM-DD)", 
  "subtotal": "number",
  "tax_amount": "number",
  "total_amount": "number"
}

DOCUMENT:
{document_text}

OUTPUT: JSON matching the schema exactly</div>
                    </div>

                    <div class="prompt-step">
                        <h5>Prompt 2: Company Information</h5>
                        <div class="prompt-content">SYSTEM: You are a company information extraction specialist.

TASK: Extract vendor and customer information from this invoice.

CONTEXT: This is an invoice document. Look for:
- Vendor info (company sending the bill)
- Customer info (company being billed)

SCHEMA:
{
  "vendor": {
    "name": "string",
    "address": "string", 
    "phone": "string",
    "email": "string"
  },
  "customer": {
    "name": "string",
    "address": "string"
  }
}

DOCUMENT:
{document_text}

OUTPUT: JSON with vendor and customer information</div>
                    </div>

                    <div class="prompt-step">
                        <h5>Prompt 3: Line Items Extraction</h5>
                        <div class="prompt-content">SYSTEM: You are a line item extraction specialist.

TASK: Extract all line items from this invoice table/list.

INSTRUCTIONS:
- Parse each row/item separately
- Extract description, quantity, unit price, and total
- If quantity is missing, assume 1
- Calculate total_price = quantity √ó unit_price if missing
- Ignore summary rows (subtotal, tax, total)

SCHEMA:
{
  "line_items": [
    {
      "description": "string",
      "quantity": "number",
      "unit_price": "number", 
      "total_price": "number"
    }
  ]
}

DOCUMENT:
{document_text}

OUTPUT: JSON with array of line items</div>
                    </div>

                    <div class="prompt-step">
                        <h5>Prompt 4: Final Integration & Validation</h5>
                        <div class="prompt-content">SYSTEM: You are a data integration and validation specialist.

TASK: Combine all extracted data and validate for consistency.

EXTRACTED DATA:
- Basic fields: {basic_fields}
- Company info: {company_info}  
- Line items: {line_items}

VALIDATION CHECKS:
- Verify line items sum to subtotal (¬±$1.00 tolerance)
- Check that total = subtotal + tax
- Ensure dates are logical (due_date >= invoice_date)
- Flag any mathematical inconsistencies

OUTPUT: Complete validated JSON + confidence score (0-1)</div>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>‚öôÔ∏è Step 3: Complete Processing Pipeline</h2>

                <div class="code-example">async function processInvoice(documentText) {
  try {
    <span class="json-comment">// Step 1: Run prompt chain</span>
    const basicFields = await extractBasicFields(documentText);
    const companyInfo = await extractCompanyInfo(documentText);
    const lineItems = await extractLineItems(documentText);
    const finalData = await integrateAndValidate(basicFields, companyInfo, lineItems, documentText);

    <span class="json-comment">// Step 2: Validate against schema</span>
    const validationResult = validateSchema(finalData, invoiceSchema);
    if (!validationResult.isValid) {
      return {
        success: false,
        errors: validationResult.errors,
        data: null
      };
    }

    <span class="json-comment">// Step 3: Clean and normalize data</span>
    const cleanedData = cleanInvoiceData(finalData);

    <span class="json-comment">// Step 4: Enhance with calculated fields</span>
    const enhancedData = enhanceInvoiceData(cleanedData);

    <span class="json-comment">// Step 5: Calculate quality metrics</span>
    const qualityScore = calculateQualityScore(enhancedData, documentText);
    const flags = generateQualityFlags(enhancedData);

    return {
      success: true,
      data: enhancedData,
      metadata: {
        confidence: qualityScore,
        quality_flags: flags,
        processed_at: new Date().toISOString(),
        extraction_method: "4_step_chain"
      }
    };

  } catch (error) {
    return {
      success: false,
      error: error.message,
      data: null
    };
  }
}</div>
            </div>

            <div class="step-section">
                <h2>üéØ Real Implementation Tips for Interns</h2>

                <div class="best-practices">
                    <div class="practice-card">
                        <h4>üöÄ Start Simple</h4>
                        <ul>
                            <li>Begin with one document type</li>
                            <li>Start with basic fields only</li>
                            <li>Add complexity gradually</li>
                            <li>Test with real documents early</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üîç Debug Systematically</h4>
                        <ul>
                            <li>Log each prompt's input and output</li>
                            <li>Test prompts individually</li>
                            <li>Build a test document collection</li>
                            <li>Track accuracy metrics over time</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>‚ö° Performance Optimization</h4>
                        <ul>
                            <li>Cache prompt results when possible</li>
                            <li>Use lower temperature for consistency</li>
                            <li>Batch similar documents together</li>
                            <li>Implement timeout and retry logic</li>
                        </ul>
                    </div>

                    <div class="practice-card">
                        <h4>üìä Monitor Quality</h4>
                        <ul>
                            <li>Track extraction accuracy by field</li>
                            <li>Monitor processing times</li>
                            <li>Log validation failures</li>
                            <li>Create feedback loops for improvement</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="step-section">
                <h2>üéì Your Next Steps</h2>

                <div class="highlight-box">
                    <h4>üöÄ Ready to Implement?</h4>
                    <p><strong>Start with this approach:</strong></p>
                    <p>1. Pick one document type you need to process<br>
                    2. Design a simple schema with 5-10 core fields<br>
                    3. Create 2-3 focused prompts (not 4!) to start<br>
                    4. Build basic validation and cleaning<br>
                    5. Test with 10 real documents<br>
                    6. Iterate and improve based on results</p>
                    
                    <p><strong>Success metrics:</strong> Aim for 80%+ accuracy on core fields within your first week of implementation.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
        }

        function showSchemaExample(type) {
            const output = document.getElementById('schema-output');
            
            if (type === 'basic') {
                output.innerHTML = `<span class="json-comment">// Basic Email Schema - Too Simple</span>
{
  <span class="json-key">"sender"</span>: <span class="json-string">"string"</span>,
  <span class="json-key">"subject"</span>: <span class="json-string">"string"</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"string"</span>
}

<span class="json-comment">// Problems: No validation, inconsistent output</span>`;
            } else if (type === 'complete') {
                output.innerHTML = `<span class="json-comment">// Complete Email Schema - Just Right</span>
{
  <span class="json-key">"sender_info"</span>: {
    <span class="json-key">"email"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span>, <span class="json-key">"format"</span>: <span class="json-string">"email"</span> },
    <span class="json-key">"name"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> }
  },
  <span class="json-key">"message_info"</span>: {
    <span class="json-key">"subject"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"string"</span> },
    <span class="json-key">"priority"</span>: { <span class="json-key">"enum"</span>: [<span class="json-string">"low"</span>, <span class="json-string">"medium"</span>, <span class="json-string">"high"</span>, <span class="json-string">"urgent"</span>] },
    <span class="json-key">"category"</span>: { <span class="json-key">"enum"</span>: [<span class="json-string">"billing"</span>, <span class="json-string">"technical"</span>, <span class="json-string">"general"</span>] }
  },
  <span class="json-key">"sentiment"</span>: { <span class="json-key">"enum"</span>: [<span class="json-string">"positive"</span>, <span class="json-string">"neutral"</span>, <span class="json-string">"negative"</span>] },
  <span class="json-key">"action_required"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"boolean"</span> },
  <span class="json-key">"urgency_score"</span>: { <span class="json-key">"type"</span>: <span class="json-string">"number"</span>, <span class="json-key">"minimum"</span>: <span class="json-number">1</span>, <span class="json-key">"maximum"</span>: <span class="json-number">10</span> }
}`;
            } else if (type === 'explanation') {
                output.innerHTML = `<span class="json-comment">// Schema Design Rationale</span>

<span class="json-key">Why this schema works:</span>

1. <span class="json-string">Structured grouping</span>: sender_info, message_info separate concerns
2. <span class="json-string">Constrained values</span>: enums prevent inconsistent categorization  
3. <span class="json-string">Business relevance</span>: urgency_score helps with ticket routing
4. <span class="json-string">Validation ready</span>: types and constraints enable validation
5. <span class="json-string">Semantic fields</span>: sentiment and action_required add value

<span class="json-key">Design principles applied:</span>
‚Ä¢ Clear field names (sender_info vs sender)
‚Ä¢ Appropriate constraints (1-10 scale for urgency)
‚Ä¢ Business logic encoded (action_required boolean)
‚Ä¢ Extensible structure (easy to add new message_info fields)`;
            }
        }

        function showPromptDemo(step) {
            const output = document.getElementById('prompt-output');
            
            const sampleEmail = `From: angry.customer@company.com
Subject: URGENT: Payment system down for 3 hours!
Priority: High

Our payment processing is completely broken. This is costing us thousands in lost revenue. Fix this immediately or we're switching providers.

Account: #AC-4829
Issue started: 2:00 PM today`;

            if (step === 'analysis') {
                output.innerHTML = `<span class="json-comment">// Prompt 1: Document Analysis</span>
<span class="json-key">Input:</span> Email document
<span class="json-key">Focus:</span> Document type and structure

<span class="json-key">Output:</span>
{
  "document_type": "customer_support_email",
  "structure_quality": "good",
  "has_priority_indicators": true,
  "has_account_reference": true,
  "estimated_urgency": "high"
}`;
            } else if (step === 'basic') {
                output.innerHTML = `<span class="json-comment">// Prompt 2: Basic Field Extraction</span>
<span class="json-key">Input:</span> Email + schema for basic fields
<span class="json-key">Focus:</span> Clear, labeled information

<span class="json-key">Output:</span>
{
  "sender_info": {
    "email": "angry.customer@company.com",
    "name": null
  },
  "message_info": {
    "subject": "URGENT: Payment system down for 3 hours!",
    "priority": "high"
  },
  "account_id": "AC-4829"
}`;
            } else if (step === 'complex') {
                output.innerHTML = `<span class="json-comment">// Prompt 3: Semantic Analysis</span>
<span class="json-key">Input:</span> Email + context from previous steps
<span class="json-key">Focus:</span> Sentiment, urgency, business impact

<span class="json-key">Output:</span>
{
  "sentiment": "negative",
  "urgency_score": 9,
  "business_impact": "high_revenue_loss",
  "churn_risk": "high",
  "category": "technical",
  "action_required": true
}`;
            } else if (step === 'integration') {
                output.innerHTML = `<span class="json-comment">// Prompt 4: Integration & Validation</span>
<span class="json-key">Input:</span> All previous outputs + original email
<span class="json-key">Focus:</span> Combine and validate consistency

<span class="json-key">Final Output:</span>
{
  "sender_info": { "email": "angry.customer@company.com", "name": null },
  "message_info": { 
    "subject": "URGENT: Payment system down for 3 hours!",
    "priority": "high",
    "category": "technical"
  },
  "sentiment": "negative",
  "urgency_score": 9,
  "action_required": true,
  "account_id": "AC-4829",
  "confidence": 0.92,
  "processing_notes": "High confidence extraction, clear indicators"
}`;
            }
        }

        function showProcessingDemo(stage) {
            const output = document.getElementById('processing-output');
            
            if (stage === 'raw') {
                output.innerHTML = `<span class="json-comment">// Raw LLM Output</span>
{
  "invoice_number": "INV-2024-001847",
  "invoice_date": "March 15, 2024",
  "due_date": "April 14th, 2024",
  "vendor_name": "  TechSolutions Corp  ",
  "total_amount": "$8,678.92",
  "tax_amount": "679.92",
  "line_items": [
    {"description": "Cloud setup", "amount": "$2,500.00"},
    {"description": "Monthly support", "amount": "$4,200"}
  ]
}

<span class="json-comment">// Issues: Inconsistent formats, extra spaces, mixed data types</span>`;
            } else if (stage === 'validated') {
                output.innerHTML = `<span class="json-comment">// After Schema Validation</span>
<span class="json-key">Validation Results:</span>
{
  "isValid": false,
  "errors": [
    "total_amount should be number, got string",
    "tax_amount should be number, got string",
    "line_items[].amount should be number, got string"
  ],
  "warnings": [
    "invoice_date format inconsistent",
    "vendor_name has extra whitespace"
  ]
}

<span class="json-comment">// Action: Proceed to cleaning to fix these issues</span>`;
            } else if (stage === 'cleaned') {
                output.innerHTML = `<span class="json-comment">// After Data Cleaning</span>
{
  "invoice_number": "INV-2024-001847",
  "invoice_date": "2024-03-15",
  "due_date": "2024-04-14", 
  "vendor_name": "TechSolutions Corp",
  "total_amount": 8678.92,
  "tax_amount": 679.92,
  "line_items": [
    {"description": "Cloud setup", "amount": 2500.00},
    {"description": "Monthly support", "amount": 4200.00}
  ]
}

<span class="json-comment">// Fixed: Normalized dates, cleaned currency, trimmed strings</span>`;
            } else if (stage === 'enhanced') {
                output.innerHTML = `<span class="json-comment">// After Enhancement</span>
{
  "invoice_number": "INV-2024-001847",
  "invoice_date": "2024-03-15",
  "due_date": "2024-04-14",
  "vendor_name": "TechSolutions Corp",
  "total_amount": 8678.92,
  "tax_amount": 679.92,
  "subtotal": 7999.00,
  "line_items": [...],
  
  <span class="json-comment">// Added calculated fields</span>
  "payment_terms_days": 30,
  "tax_rate": 0.085,
  "line_item_count": 2,
  "average_item_value": 3350.00
}

<span class="json-comment">// Added: Derived business metrics</span>`;
            } else if (stage === 'final') {
                output.innerHTML = `<span class="json-comment">// Final Production-Ready Result</span>
{
  "data": {
    "invoice_number": "INV-2024-001847",
    "invoice_date": "2024-03-15",
    "due_date": "2024-04-14",
    "vendor_name": "TechSolutions Corp",
    "total_amount": 8678.92,
    "tax_amount": 679.92,
    "subtotal": 7999.00,
    "line_items": [...],
    "payment_terms_days": 30,
    "tax_rate": 0.085
  },
  "metadata": {
    "confidence": 0.94,
    "quality_flags": [],
    "processing_time_ms": 2340,
    "extracted_fields": 8,
    "validation_passed": true
  }
}

<span class="json-comment">// Ready for business use with full metadata</span>`;
            }
        }
    </script>
</body>
</html>